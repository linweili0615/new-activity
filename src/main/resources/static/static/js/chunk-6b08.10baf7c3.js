(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6b08"],{"/umX":function(e,t,o){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(o("9dlP"));t.default=function(e,t,o){return t in e?(0,r.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},"9dlP":function(e,t,o){e.exports={default:o("aA0A"),__esModule:!0}},McxH:function(e,t,o){var r=o("6qcy");r(r.S+r.F*!o("m4jn"),"Object",{defineProperty:o("yWpJ").f})},SdGh:function(e,t,o){},WxTs:function(e,t,o){"use strict";var r=o("SdGh");o.n(r).a},aA0A:function(e,t,o){o("McxH");var r=o("o4ww").Object;e.exports=function(e,t,o){return r.defineProperty(e,t,o)}},pc93:function(e,t,o){"use strict";o.r(t);var r,a=o("/umX"),s=o.n(a),n={data:function(){return{f_name:"",project:[],total:0,sizes:[15,20,30,40],pagesize:15,pageCount:1,page:1,currentpage:1,listLoading:!1,sels:[],innerVisible:!1,editFormVisible:!1,editLoading:!1,options:[{label:"启用",value:1},{label:"禁用",value:-1}],editFormRules:{project_name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:30,message:"请输入长度在2到30个字符的项目名称",trigger:"blur"}]},projectForm:{p_name:""},projectFormRules:{p_name:{required:!0,message:"请输入服务名称",trigger:"blur"}},deal_type:"add",p_status:[{value:"灰度",label:"灰度"},{value:"正式",label:"正式"}],p_tester:[],s_names:[],p_status_val:"",addFormVisible:!1,projectExtendFormRules:{p_name:{required:!0,message:"请选择服务名称",trigger:"blur"},branch:{required:!0,message:"请输入GIT分支",trigger:"blur"},modify_content:{required:!0,message:"请输入修改内容",trigger:"blur"},modify_tester:{required:!0,message:"请选择测试",trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"}},projectExtendForm:{e_id:"",p_name:"",branch:"",md5:"",modify_content:"",modify_tester:"",status:"灰度"}}},methods:(r={resetprojectExtendForm:function(){this.innerVisible=!1,this.$refs.projectForm.resetFields()},addProjectSubmit:function(){var e=this;this.$refs.projectForm.validate(function(t){t&&e.$axios.post("/project/add",e.projectForm.p_name).then(function(t){"SUCCESS"===t.data.status?(e.innerVisible=!1,e.getProjectList()):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})})},openProject:function(){this.innerVisible=!0},getProjectExtendList:function(e,t){var o=this;t>this.pageCount&&(t=this.pageCount),this.listLoading=!0,this.$axios.post("/project/extend/list",{pageSize:e,pageNo:t}).then(function(e){"SUCCESS"===e.data.status?(o.project=e.data.data,o.total=e.data.total,o.pageCount=e.data.pageCount,o.pageNo=e.data.pageNo,o.pageSize=e.data.pageSize,o.listLoading=!1):(o.listLoading=!1,o.$message.error({message:"获取项目列表失败",center:!1}))}).catch(function(e){o.listLoading=!1,o.$message.error({message:"获取项目列表异常",center:!1})})},handleDel:function(e){var t=this;this.$confirm("确认删除该记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/project/extend/del",e.e_id).then(function(e){"SUCCESS"===e.data.status?t.getProjectExtendList(15,1):t.$message({type:"success",message:"删除失败!"})}).catch(function(e){t.$message.error({message:"删除异常",center:!1})})}).catch(function(e){console.log(e)})},handleSizeChange:function(e){this.pagesize=e,this.getProjectExtendList(this.pagesize,1)},handleCurrentChange:function(e){this.currentpage=e,this.getProjectExtendList(this.pagesize,this.currentpage)},handleEdit:function(e){var t=this;this.$axios.post("/project/extend/info",e.e_id).then(function(e){"SUCCESS"===e.data.status?(t.deal_type="edit",t.projectExtendForm=e.data.data,t.getProjectList(),t.getTesterList(),t.addFormVisible=!0):t.$message.error(response.data.msg)}).catch(function(e){console.log(e)})},handleAdd:function(){this.getTesterList(),this.getProjectList(),this.addFormVisible=!0},getTesterList:function(){var e=this;this.$axios.get("/tester/list").then(function(t){e.p_tester=t.data}).catch(function(e){})}},s()(r,"getTesterList",function(){var e=this;this.$axios.get("/tester/list").then(function(t){"SUCCESS"===t.data.status?e.p_tester=t.data.data:console.log(t.data.msg)}).catch(function(e){})}),s()(r,"getProjectList",function(){var e=this;this.$axios.get("/project/list").then(function(t){"SUCCESS"===t.data.status?e.s_names=t.data.data:console.log(t.data.msg)}).catch(function(e){})}),s()(r,"checkRequest",function(e){var t=this;this.$axios.post("/project/extend/edit",{e_id:e.e_id,status:e.status}).then(function(e){"SUCCESS"!==e.data.status?t.$message.error(e.data.msg):console.log(e.data)}).catch(function(e){console.log(e)})}),s()(r,"editSubmit",function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$axios.post("/project/update",{id:e.editForm.id,project_name:e.editForm.project_name,status:e.editForm.status}).then(function(t){"SUCCESS"===t.data.status?(e.$message.success({message:"更新项目成功",center:!0}),e.editFormVisible=!1,e.filters.id="",e.filters.project_name="",e.getProjectList(15,1)):e.$message.error({message:"更新项目异常",center:!1})}).catch(function(t){e.$message.error({message:"更新项目异常",center:!1})})})}),s()(r,"resetForm",function(){this.addFormVisible=!1,this.$refs.projectExtendForm.resetFields()}),s()(r,"addSubmit",function(){var e=this;this.$refs.projectExtendForm.validate(function(t){if(t){var o="/project/extend/add";"edit"===e.deal_type&&(o="/project/extend/edit"),e.$axios.post(o,{e_id:e.projectExtendForm.e_id,p_name:e.projectExtendForm.p_name,branch:e.projectExtendForm.branch,md5:e.projectExtendForm.md5,modify_content:e.projectExtendForm.modify_content,modify_tester:e.projectExtendForm.modify_tester,status:e.projectExtendForm.status}).then(function(t){"SUCCESS"===t.data.status?(e.addFormVisible=!1,e.getProjectExtendList(15,1)):e.$message.error(t.data.msg)}).catch(function(e){console.log(e)})}})}),s()(r,"selsChange",function(e){this.sels=e}),r),computed:{filterProjectlist:function(){var e=this;return this.project.filter(function(t){return!e.f_name||t.p_name.toLowerCase().includes(e.f_name.toLowerCase())})}},mounted:function(){this.getProjectExtendList(15,1)}},i=(o("WxTs"),o("ZrdR")),l=Object(i.a)(n,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dashboard-container"},[o("el-row",{attrs:{gutter:24}},[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-form",[o("el-form-item",[o("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入服务名称进行过滤"},model:{value:e.f_name,callback:function(t){e.f_name=t},expression:"f_name"}}),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),o("el-form-item",[[o("section",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.filterProjectlist,"highlight-current-row":"",height:"73vh"},on:{"selection-change":e.selsChange}},[o("el-table-column",{attrs:{width:"240",label:"服务名称",prop:"p_name","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"branch",label:"GIT分支",width:"320","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"md5",label:"MD5",width:"300","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"modify_content",label:"修改内容",width:"150","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"modify_tester",label:"测试",width:"120","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-select",{attrs:{size:"medium"},on:{change:function(o){e.checkRequest(t.row)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}},e._l(e.p_status,function(e,t){return o("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"modify_date",label:"处理时间",width:"200",sortable:"","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{staticStyle:{"min-width":"260px"},attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-col",{staticClass:"toolbar",staticStyle:{"margin-top":"10px"},attrs:{span:12,offset:6}},[o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":e.currentpage,"page-sizes":e.sizes,"page-size":e.pagesize,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),e._v(" "),o("el-dialog",{attrs:{title:"编辑",visible:e.addFormVisible,"close-on-click-modal":!1,"before-close":e.resetForm},on:{"update:visible":function(t){e.addFormVisible=t}}},[o("el-dialog",{attrs:{width:"50%",title:"新增",visible:e.innerVisible,"append-to-body":"","before-close":e.resetprojectExtendForm,"close-on-click-modal":!1},on:{"update:visible":function(t){e.innerVisible=t}}},[o("el-form",{ref:"projectForm",attrs:{model:e.projectForm,rules:e.projectFormRules}},[o("el-form-item",{attrs:{label:"服务名称：",prop:"p_name"}},[o("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:e.projectForm.p_name,callback:function(t){e.$set(e.projectForm,"p_name",t)},expression:"projectForm.p_name"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){return e.resetprojectExtendForm(t)}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addProjectSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),o("el-form",{ref:"projectExtendForm",attrs:{model:e.projectExtendForm,"label-width":"100px",rules:e.projectExtendFormRules}},[o("el-form-item",{attrs:{label:"服务名称:",prop:"p_name"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择服务名称"},model:{value:e.projectExtendForm.p_name,callback:function(t){e.$set(e.projectExtendForm,"p_name",t)},expression:"projectExtendForm.p_name"}},e._l(e.s_names,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.openProject}},[e._v("添加")])],1),e._v(" "),o("el-form-item",{attrs:{label:"GIT分支:",prop:"branch"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入GIT分支"},model:{value:e.projectExtendForm.branch,callback:function(t){e.$set(e.projectExtendForm,"branch","string"==typeof t?t.trim():t)},expression:"projectExtendForm.branch"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"MD5值:",prop:"md5"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入MD5值"},model:{value:e.projectExtendForm.md5,callback:function(t){e.$set(e.projectExtendForm,"md5","string"==typeof t?t.trim():t)},expression:"projectExtendForm.md5"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"修改内容:",prop:"modify_content"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入修改内容"},model:{value:e.projectExtendForm.modify_content,callback:function(t){e.$set(e.projectExtendForm,"modify_content",t)},expression:"projectExtendForm.modify_content"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"测试:",prop:"modify_tester"}},[o("el-select",{attrs:{placeholder:"请选择测试"},model:{value:e.projectExtendForm.modify_tester,callback:function(t){e.$set(e.projectExtendForm,"modify_tester",t)},expression:"projectExtendForm.modify_tester"}},e._l(e.p_tester,function(e,t){return o("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"状态:"}},[o("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.projectExtendForm.status,callback:function(t){e.$set(e.projectExtendForm,"status",t)},expression:"projectExtendForm.status"}},e._l(e.p_status,function(e,t){return o("el-option",{key:t+"",attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){return e.resetForm(t)}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)]],2)],1)],1)])],1)])],1)],1)},[],!1,null,"c439009c",null);l.options.__file="ProjectList.vue";t.default=l.exports}}]);