(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b79"],{"/umX":function(t,e,o){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(o("9dlP"));e.default=function(t,e,o){return e in t?(0,r.default)(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},"74sU":function(t,e,o){},"9dlP":function(t,e,o){t.exports={default:o("aA0A"),__esModule:!0}},McxH:function(t,e,o){var r=o("6qcy");r(r.S+r.F*!o("m4jn"),"Object",{defineProperty:o("yWpJ").f})},aA0A:function(t,e,o){o("McxH");var r=o("o4ww").Object;t.exports=function(t,e,o){return r.defineProperty(t,e,o)}},pc93:function(t,e,o){"use strict";o.r(e);var r,a=o("/umX"),n=o.n(a),s={data:function(){return{f_name:"",project:[],total:0,sizes:[15,20,30,40],pagesize:15,pageCount:1,page:1,currentpage:1,listLoading:!1,sels:[],innerVisible:!1,editFormVisible:!1,editLoading:!1,options:[{label:"启用",value:1},{label:"禁用",value:-1}],editFormRules:{project_name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:2,max:30,message:"请输入长度在2到30个字符的项目名称",trigger:"blur"}]},projectForm:{p_name:""},projectFormRules:{p_name:{required:!0,message:"请输入服务名称",trigger:"blur"}},deal_type:"add",p_status:[{value:"灰度",label:"灰度"},{value:"正式",label:"正式"}],p_tester:[],s_names:[],p_status_val:"",addFormVisible:!1,projectExtendFormRules:{p_name:{required:!0,message:"请选择服务名称",trigger:"blur"},branch:{required:!0,message:"请输入GIT分支",trigger:"blur"},modify_content:{required:!0,message:"请输入修改内容",trigger:"blur"},modify_tester:{required:!0,message:"请选择测试",trigger:"blur"},status:{required:!0,message:"请选择状态",trigger:"blur"}},projectExtendForm:{e_id:"",p_name:"",branch:"",md5:"",modify_content:"",modify_tester:"",status:"灰度"}}},methods:(r={resetprojectExtendForm:function(){this.innerVisible=!1,this.$refs.projectForm.resetFields()},addProjectSubmit:function(){var t=this;this.$refs.projectForm.validate(function(e){e&&t.$axios.post("/project/add",t.projectForm.p_name).then(function(e){"SUCCESS"===e.data.status?(t.innerVisible=!1,t.getProjectList()):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})})},openProject:function(){this.innerVisible=!0},getProjectExtendList:function(t,e){var o=this;e>this.pageCount&&(e=this.pageCount),this.listLoading=!0,this.$axios.post("/project/extend/list",{pageSize:t,pageNo:e}).then(function(t){"SUCCESS"===t.data.status?(o.project=t.data.data,o.total=t.data.total,o.pageCount=t.data.pageCount,o.pageNo=t.data.pageNo,o.pageSize=t.data.pageSize,o.listLoading=!1):(o.listLoading=!1,o.$message.error({message:"获取项目列表失败",center:!1}))}).catch(function(t){o.listLoading=!1,o.$message.error({message:"获取项目列表异常",center:!1})})},copyPre:function(t){return t.p_name+"\n----------------麻烦更到线上\n"+t.md5+"\n"},handleCopy:function(t){this.$copyText(this.copyPre(t)).then(function(t){console.log(t)})},handleDel:function(t){var e=this;this.$confirm("确认删除该记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("/project/extend/del",t.e_id).then(function(t){"SUCCESS"===t.data.status?e.getProjectExtendList(15,1):e.$message({type:"success",message:"删除失败!"})}).catch(function(t){e.$message.error({message:"删除异常",center:!1})})}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.pagesize=t,this.getProjectExtendList(this.pagesize,1)},handleCurrentChange:function(t){this.currentpage=t,this.getProjectExtendList(this.pagesize,this.currentpage)},handleEdit:function(t){var e=this;this.$axios.post("/project/extend/info",t.e_id).then(function(t){"SUCCESS"===t.data.status?(e.deal_type="edit",e.projectExtendForm=t.data.data,e.getProjectList(),e.getTesterList(),e.addFormVisible=!0):e.$message.error(response.data.msg)}).catch(function(t){console.log(t)})},handleAdd:function(){this.getTesterList(),this.getProjectList(),this.addFormVisible=!0},getTesterList:function(){var t=this;this.$axios.get("/tester/list").then(function(e){t.p_tester=e.data}).catch(function(t){})}},n()(r,"getTesterList",function(){var t=this;this.$axios.get("/tester/list").then(function(e){"SUCCESS"===e.data.status?t.p_tester=e.data.data:console.log(e.data.msg)}).catch(function(t){})}),n()(r,"getProjectList",function(){var t=this;this.$axios.get("/project/list").then(function(e){"SUCCESS"===e.data.status?t.s_names=e.data.data:console.log(e.data.msg)}).catch(function(t){})}),n()(r,"checkRequest",function(t){var e=this;this.$axios.post("/project/extend/edit",{e_id:t.e_id,status:t.status}).then(function(t){"SUCCESS"!==t.data.status?e.$message.error(t.data.msg):console.log(t.data)}).catch(function(t){console.log(t)})}),n()(r,"editSubmit",function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$axios.post("/project/update",{id:t.editForm.id,project_name:t.editForm.project_name,status:t.editForm.status}).then(function(e){"SUCCESS"===e.data.status?(t.$message.success({message:"更新项目成功",center:!0}),t.editFormVisible=!1,t.filters.id="",t.filters.project_name="",t.getProjectList(15,1)):t.$message.error({message:"更新项目异常",center:!1})}).catch(function(e){t.$message.error({message:"更新项目异常",center:!1})})})}),n()(r,"resetForm",function(){this.addFormVisible=!1,this.$refs.projectExtendForm.resetFields()}),n()(r,"addSubmit",function(){var t=this;this.$refs.projectExtendForm.validate(function(e){if(e){var o="/project/extend/add";"edit"===t.deal_type&&(o="/project/extend/edit"),t.$axios.post(o,{e_id:t.projectExtendForm.e_id,p_name:t.projectExtendForm.p_name,branch:t.projectExtendForm.branch,md5:t.projectExtendForm.md5,modify_content:t.projectExtendForm.modify_content,modify_tester:t.projectExtendForm.modify_tester,status:t.projectExtendForm.status}).then(function(e){"SUCCESS"===e.data.status?(t.addFormVisible=!1,t.getProjectExtendList(15,1)):t.$message.error(e.data.msg)}).catch(function(t){console.log(t)})}})}),n()(r,"selsChange",function(t){this.sels=t}),r),computed:{filterProjectlist:function(){var t=this;return this.project.filter(function(e){return!t.f_name||e.p_name.toLowerCase().includes(t.f_name.toLowerCase())})}},mounted:function(){this.getProjectExtendList(15,1)}},i=(o("up1M"),o("ZrdR")),l=Object(i.a)(s,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dashboard-container"},[o("el-row",{attrs:{gutter:24}},[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-form",[o("el-form-item",[o("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"请输入服务名称进行过滤"},model:{value:t.f_name,callback:function(e){t.f_name=e},expression:"f_name"}}),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1),t._v(" "),o("el-form-item",[[o("section",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.filterProjectlist,"highlight-current-row":"",height:"73vh"},on:{"selection-change":t.selsChange}},[o("el-table-column",{attrs:{width:"240",label:"服务名称",prop:"p_name","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"branch",label:"GIT分支",width:"320","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"md5",label:"MD5",width:"300","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"modify_content",label:"修改内容",width:"150","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"modify_tester",label:"测试",width:"120","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-select",{attrs:{size:"medium"},on:{change:function(o){t.checkRequest(e.row)}},model:{value:e.row.status,callback:function(o){t.$set(e.row,"status",o)},expression:"scope.row.status"}},t._l(t.p_status,function(t,e){return o("el-option",{key:e+"",attrs:{label:t.label,value:t.value}})}))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"modify_date",label:"处理时间",width:"200",sortable:"","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{staticStyle:{"min-width":"260px"},attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){t.handleDel(e.row)}}},[t._v("删除")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"info",plain:""},on:{click:function(o){t.handleCopy(e.row)}}},[t._v("点击复制")])]}}])})],1),t._v(" "),o("el-col",{staticClass:"toolbar",staticStyle:{"margin-top":"10px"},attrs:{span:12,offset:6}},[o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":t.currentpage,"page-sizes":t.sizes,"page-size":t.pagesize,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),o("el-dialog",{attrs:{title:"编辑",visible:t.addFormVisible,"close-on-click-modal":!1,"before-close":t.resetForm},on:{"update:visible":function(e){t.addFormVisible=e}}},[o("el-dialog",{attrs:{width:"50%",title:"新增",visible:t.innerVisible,"append-to-body":"","before-close":t.resetprojectExtendForm,"close-on-click-modal":!1},on:{"update:visible":function(e){t.innerVisible=e}}},[o("el-form",{ref:"projectForm",attrs:{model:t.projectForm,rules:t.projectFormRules}},[o("el-form-item",{attrs:{label:"服务名称：",prop:"p_name"}},[o("el-input",{attrs:{placeholder:"请输入服务名称"},model:{value:t.projectForm.p_name,callback:function(e){t.$set(t.projectForm,"p_name",e)},expression:"projectForm.p_name"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){return t.resetprojectExtendForm(e)}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addProjectSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),o("el-form",{ref:"projectExtendForm",attrs:{model:t.projectExtendForm,"label-width":"100px",rules:t.projectExtendFormRules}},[o("el-form-item",{attrs:{label:"服务名称:",prop:"p_name"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择服务名称"},model:{value:t.projectExtendForm.p_name,callback:function(e){t.$set(t.projectExtendForm,"p_name",e)},expression:"projectExtendForm.p_name"}},t._l(t.s_names,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.openProject}},[t._v("添加")])],1),t._v(" "),o("el-form-item",{attrs:{label:"GIT分支:",prop:"branch"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入GIT分支"},model:{value:t.projectExtendForm.branch,callback:function(e){t.$set(t.projectExtendForm,"branch","string"==typeof e?e.trim():e)},expression:"projectExtendForm.branch"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"MD5值:",prop:"md5"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入MD5值"},model:{value:t.projectExtendForm.md5,callback:function(e){t.$set(t.projectExtendForm,"md5","string"==typeof e?e.trim():e)},expression:"projectExtendForm.md5"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"修改内容:",prop:"modify_content"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入修改内容"},model:{value:t.projectExtendForm.modify_content,callback:function(e){t.$set(t.projectExtendForm,"modify_content",e)},expression:"projectExtendForm.modify_content"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"测试:",prop:"modify_tester"}},[o("el-select",{attrs:{placeholder:"请选择测试"},model:{value:t.projectExtendForm.modify_tester,callback:function(e){t.$set(t.projectExtendForm,"modify_tester",e)},expression:"projectExtendForm.modify_tester"}},t._l(t.p_tester,function(t,e){return o("el-option",{key:e+"",attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"状态:"}},[o("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.projectExtendForm.status,callback:function(e){t.$set(t.projectExtendForm,"status",e)},expression:"projectExtendForm.status"}},t._l(t.p_status,function(t,e){return o("el-option",{key:e+"",attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){return t.resetForm(e)}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1)],1)]],2)],1)],1)])],1)])],1)],1)},[],!1,null,"54932c82",null);l.options.__file="ProjectList.vue";e.default=l.exports},up1M:function(t,e,o){"use strict";var r=o("74sU");o.n(r).a}}]);